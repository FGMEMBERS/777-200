<?xml version="1.0"?>
<!-- 777-200  Autopilot-->
<!-- Syd Adams. -->

<PropertyList>
<!--
=========
Roll Axis Modes
=========
-->

<!-- go around wing level-->

    <pi-simple-controller>
        <name>TO/GA</name>
        <debug>false</debug>
        <enable>
            <prop>instrumentation/afds/settings/roll-mode</prop>
            <value>TO/GA</value>
        </enable>
        <input>
            <prop>orientation/roll-deg</prop>
        </input>
        <reference>
            <value>0.0</value>
        </reference>
        <output>
            <prop>autopilot/internal/target-roll-filter</prop>
        </output>
        <config>
            <Kp>
                <value>1.0</value>
            </Kp>
            <Ki>0.0</Ki>
            <u_min>
                <prop>instrumentation/afds/bank-min</prop>
            </u_min>
            <u_max>
                <prop>instrumentation/afds/bank-max</prop>
            </u_max>
        </config>
    </pi-simple-controller>

<!-- Heading Bug Hold. -->

    <pi-simple-controller>
        <name>HDG-SEL</name>
        <debug>false</debug>
        <enable>
            <prop>instrumentation/afds/ap-modes/roll-mode</prop>
            <value>HDG SEL</value>
        </enable>
        <input>
            <prop>autopilot/internal/fdm-heading-bug-error-deg</prop>
        </input>
        <reference>
            <value>0</value>
        </reference>
        <output>
            <prop>autopilot/internal/target-roll-filter</prop>
        </output>
        <config>
            <Kp>
                <value>-1.0</value>
            </Kp>
            <Ki>0.0</Ki>
            <u_min>
                <prop>instrumentation/afds/settings/bank-min</prop>
            </u_min>
            <u_max>
                <prop>instrumentation/afds/settings/bank-max</prop>
            </u_max>
        </config>
    </pi-simple-controller>

    <pi-simple-controller>
        <name>hdg-hld</name>
        <debug>false</debug>
        <enable>
            <prop>instrumentation/afds/ap-modes/roll-mode</prop>
            <value>HDG HOLD</value>
        </enable>
        <input>
            <prop>autopilot/internal/fdm-heading-bug-error-deg</prop>
        </input>
        <reference>
            <value>0</value>
        </reference>
        <output>
            <prop>autopilot/internal/target-roll-filter</prop>
        </output>
        <config>
            <Kp>
                <value>-1.0</value>
            </Kp>
            <Ki>0.0</Ki>
            <u_min>
                <prop>instrumentation/afds/settings/bank-min</prop>
            </u_min>
            <u_max>
                <prop>instrumentation/afds/settings/bank-max</prop>
            </u_max>
        </config>
    </pi-simple-controller>

    <pi-simple-controller>
        <name>lnav</name>
        <debug>false</debug>
        <enable>
            <prop>instrumentation/afds/ap-modes/roll-mode</prop>
            <value>LNAV</value>
        </enable>
        <input>
            <prop>instrumentation/afds/settings/lnav-mag-heading</prop>
        </input>
        <reference>
            <value>0</value>
        </reference>
        <output>
            <prop>autopilot/internal/target-roll-filter</prop>
        </output>
        <config>
            <Kp>
                <value>-1.0</value>
            </Kp>
            <Ki>0.0</Ki>
            <u_min>
                <prop>instrumentation/afds/settings/bank-min</prop>
            </u_min>
            <u_max>
                <prop>instrumentation/afds/settings/bank-max</prop>
            </u_max>
        </config>
    </pi-simple-controller>

<!-- NAV / APPR. -->

    <pi-simple-controller>
        <name>loc</name>
        <debug>false</debug>
        <enable>
            <prop>instrumentation/afds/ap-modes/roll-mode</prop>
            <value>LOC</value>
        </enable>
        <input>
            <prop>instrumentation/afds/settings/lnav-mag-heading</prop>
        </input>
        <reference>
            <value>0</value>
        </reference>
        <output>
            <prop>autopilot/internal/target-roll-filter</prop>
        </output>
        <config>
            <Kp>
                <value>-1.0</value>
            </Kp>
            <Ki>0.0</Ki>
            <u_min>
                <prop>instrumentation/afds/settings/bank-min</prop>
            </u_min>
            <u_max>
                <prop>instrumentation/afds/settings/bank-max</prop>
            </u_max>
        </config>
    </pi-simple-controller>

<!-- TRK HOLD. -->

    <pi-simple-controller>
        <name>trk sel</name>
        <debug>false</debug>
        <enable>
            <prop>instrumentation/afds/ap-modes/roll-mode</prop>
            <value>TRK SEL</value>
        </enable>
        <input>
            <prop>orientation/heading-magnetic-deg</prop>
        </input>
        <reference>
            <value>instrumentation/afds/settings/trk</value>
        </reference>
        <output>
            <prop>autopilot/internal/target-roll-filter</prop>
        </output>
        <config>
            <Kp>
                <value>0.5</value>
            </Kp>
            <Ki>0</Ki>
            <u_min>
                <prop>instrumentation/afds/settings/bank-min</prop>
            </u_min>
            <u_max>
                <prop>instrumentation/afds/settings/bank-max</prop>
            </u_max>
        </config>
    </pi-simple-controller>

    <pi-simple-controller>
        <name>trk hold</name>
        <debug>false</debug>
        <enable>
            <prop>instrumentation/afds/ap-modes/roll-mode</prop>
            <value>TRK HOLD</value>
        </enable>
        <input>
            <prop>orientation/heading-magnetic-deg</prop>
        </input>
        <reference>
            <value>instrumentation/afds/settings/trk</value>
        </reference>
        <output>
            <prop>autopilot/internal/target-roll-filter</prop>
        </output>
        <config>
            <Kp>
                <value>0.5</value>
            </Kp>
            <Ki>0</Ki>
            <u_min>
                <prop>instrumentation/flightdirector/bank-limit-min</prop>
            </u_min>
            <u_max>
                <prop>instrumentation/flightdirector/bank-limit-max</prop>
            </u_max>
        </config>
    </pi-simple-controller>

<filter>
    <name>aileron</name>
    <debug>false</debug>
    <type>noise-spike</type>
    <input>autopilot/internal/target-roll-filter</input>
    <output>autopilot/internal/target-roll-deg</output>
    <max-rate-of-change>5</max-rate-of-change>
</filter>


<!-- AILERON CONTROL -->

    <pid-controller>
        <name>Aileron control</name>
        <debug>false</debug>
        <enable>
            <prop>autopilot/locks/roll-engaged</prop>
            <value>true</value>
            <honor-passive>true</honor-passive>
        </enable>
        <input>
            <prop>orientation/roll-deg</prop>
        </input>
        <reference>
            <prop>autopilot/internal/target-roll-deg</prop>
        </reference>
        <output>
            <prop>controls/flight/aileron</prop>
        </output>
        <config>
            <Kp>
                <value>1.5</value>
            </Kp>
            <beta>1.0</beta>
            <alpha>0.1</alpha>
            <gamma>0.0</gamma>
            <Ti>
                <value>1.0</value>
            </Ti>
            <Td>
                <value>0.0</value>
            </Td>
            <u_min>
                <value>-1.0</value>
            </u_min>
            <u_max>
                <value>1.0</value>
            </u_max>
        </config>
    </pid-controller>

<!--
==========================
                Pitch Axis Modes
==========================
-->

<!-- GO AROUND -->

    <pi-simple-controller>
        <name>GA</name>
        <debug>false</debug>
        <enable>
            <prop>instrumentation/afds/ap-modes/pitch-mode</prop>
            <value>TO/GA</value>
        </enable>
        <input>
            <prop>position/altitude-ft</prop>
        </input>
        <reference>
            <prop>instrumentation/flightdirector/FP-alt</prop>
        </reference>
        <output>
            <prop>autopilot/internal/target-pitch-filter</prop>
        </output>
        <config>
            <Kp>
                <value>0.005</value>
            </Kp>
            <Ki>0.0</Ki>
            <u_min>
                <value>-9.9</value>
            </u_min>
            <u_max>
                <value>9.9</value>
            </u_max>
        </config>
    </pi-simple-controller>

<!-- Flight Path Angle -->

    <filter>
        <name>fpa</name>
        <debug>false</debug>
        <type>noise-spike</type>
            <enable>
                <prop>instrumentation/afds/ap-modes/pitch-mode</prop>
                <value>FPA</value>
            </enable>
        <input>instrumentation/afds/settings/fpa</input>
        <output>autopilot/internal/target-pitch-filter</output>
        <max-rate-of-change>2</max-rate-of-change>
    </filter>

<!-- Alt hold -->

    <pi-simple-controller>
        <name>Inst Altitude Hold</name>
        <debug>false</debug>
        <enable>
            <prop>instrumentation/afds/ap-modes/pitch-mode</prop>
            <value>ALT</value>
        </enable>
        <input>
            <prop>position/altitude-ft</prop>
            <scale>0.1</scale>
        </input>
        <reference>
            <prop>instrumentation/afds/settings/altitude</prop>
            <scale>0.1</scale>
        </reference>
        <output>
            <prop>autopilot/internal/target-pitch-filter</prop>
        </output>
        <config>
            <Kp>
                <value>0.1</value>
            </Kp>
            <Ki>0.0</Ki>
            <u_min>
                <value>-5</value>
            </u_min>
            <u_max>
                <value>5</value>
            </u_max>
        </config>
    </pi-simple-controller>

<!-- VNAV ALT  hold -->

    <pi-simple-controller>
        <name>VNAV Alt Hold</name>
        <debug>false</debug>
        <enable>
            <prop>instrumentation/afds/ap-modes/pitch-mode</prop>
            <value>VNAV ALT</value>
        </enable>
        <input>
            <prop>instrumentation/altimeter/indicated-altitude-ft</prop>
            <scale>0.1</scale>
        </input>
        <reference>
            <prop>instrumentation/afds/settings/vnav-alt</prop>
            <scale>0.1</scale>
        </reference>
        <output>
            <prop>autopilot/internal/target-pitch-filter</prop>
        </output>
        <config>
            <Kp>
                <value>1.5</value>
            </Kp>
            <Ki>0.0</Ki>
            <u_min>
                <value>-5.0</value>
            </u_min>
            <u_max>
                <value>5.0</value>
            </u_max>
        </config>
    </pi-simple-controller>

<!-- Glideslope hold. -->

    <pi-simple-controller>
        <name>Glideslope1</name>
        <debug>false</debug>
       <enable>
            <prop>instrumentation/afds/ap-modes/pitch-mode</prop>
            <value>G/S</value>
        </enable>
        <input>
            <prop>instrumentation/nav/gs-needle-deflection</prop>
            <offset>-3</offset>
        </input>
        <reference>
            <value>0</value>
        </reference>
        <output>
            <prop>autopilot/internal/target-pitch-filter</prop>
        </output>
        <config>
            <Kp>
                <value>-1.5</value>
            </Kp>
            <Ki>0.0</Ki>
            <u_min>
                <value>-6.0</value>
            </u_min>
            <u_max>
                <value>2.0</value>
            </u_max>
        </config>
    </pi-simple-controller>

<!-- V/S hold -->

    <pi-simple-controller>
        <name>Vertical Speed Hold</name>
        <debug>false</debug>
        <enable>
            <prop>instrumentation/afds/ap-modes/pitch-mode</prop>
            <value>V/S</value>
        </enable>
        <input>
            <prop>velocities/vertical-speed-fps</prop>
        </input>
        <reference>
            <prop>instrumentation/afds/settings/vs</prop>
            <scale>0.01667</scale>
        </reference>
        <output>
            <prop>autopilot/internal/target-pitch-filter</prop>
        </output>
        <config>
            <Kp>
                <value>0.05</value>
            </Kp>
            <Ki>0.0</Ki>
            <u_min>
                <value>-5.0</value>
            </u_min>
            <u_max>
                <value>5.0</value>
            </u_max>
        </config>
    </pi-simple-controller>

<!-- Elevator Control -->
<filter>
    <name>elevator</name>
    <debug>false</debug>
    <type>noise-spike</type>
    <input>autopilot/internal/target-pitch-filter</input>
    <output>autopilot/internal/target-pitch-deg</output>
    <max-rate-of-change>0.5</max-rate-of-change>
</filter>

<pid-controller>
  <name>Elevator Control</name>
  <debug>false</debug>
  <enable>
    <prop>autopilot/locks/pitch-engaged</prop>
    <value>true</value>
    <honor-passive>true</honor-passive>
  </enable>
  <input>
    <prop>orientation/pitch-deg</prop>
  </input>
  <reference>
    <prop>autopilot/internal/target-pitch-deg</prop>
  </reference>
  <output>
    <prop>controls/flight/elevator-trim</prop>
  </output>
  <config>
<Kp>-0.15</Kp>
<beta>1.0</beta>
<alpha>0.1</alpha>
<gamma>0.0</gamma>
<Ti>1.0</Ti>
<Td>0.0</Td>
<u_min>-0.25</u_min>
<u_max>0.25</u_max>  </config>
</pid-controller>

<!--
===================
           Velocity Modes
===================
-->

<!-- IAS hold-->

    <pid-controller>
        <name>IAS HOLD</name>
        <debug>false</debug>
        <enable>
            <prop>autopilot/locks/speed</prop>
            <value>SPD</value>
            <honor-passive>true</honor-passive>
        </enable>
        <input>
            <prop>velocities/airspeed-kt</prop>
        </input>
        <reference>
            <prop>autopilot/settings/target-speed-kt</prop>
        </reference>
        <output>
            <prop>controls/engines/engine[0]/throttle</prop>
            <prop>controls/engines/engine[1]/throttle</prop>
        </output>
        <config>
            <Kp>
                <value>0.1</value>
            </Kp>
            <beta>1.0</beta>
            <alpha>0.1</alpha>
            <gamma>0.0</gamma>
            <Ti>
                <value>10.0</value>
            </Ti>
            <Td>
                <value>0.001</value>
            </Td>
            <u_min>
                <value>0</value>
            </u_min>
            <u_max>
                <value>1</value>
            </u_max>
        </config>
    </pid-controller>

<!-- MACH hold-->

    <pid-controller>
        <name>MACH HOLD</name>
        <debug>false</debug>
        <enable>
            <prop>autopilot/locks/speed</prop>
            <value>mach-hold</value>
            <honor-passive>true</honor-passive>
        </enable>
        <input>
            <prop>velocities/mach</prop>
        </input>
        <reference>
            <prop>autopilot/settings/target-speed-mach</prop>
        </reference>
        <output>
            <prop>controls/engines/engine[0]/throttle</prop>
            <prop>controls/engines/engine[1]/throttle</prop>
        </output>
        <config>
            <Kp>
                <value>2.0</value>0
            </Kp>
            <beta>1.0</beta>
            <alpha>0.1</alpha>
            <gamma>0.0</gamma>
            <Ti>
                <value>10.0</value>
            </Ti>
            <Td>
                <value>0.001</value>
            </Td>
            <u_min>
                <value>0</value>
            </u_min>
            <u_max>
                <value>1</value>
            </u_max>
        </config>
    </pid-controller>

</PropertyList>

